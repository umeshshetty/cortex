<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cortex System Architecture</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@400;600;800&display=swap"
        rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a;
            color: white;
        }

        .font-mono {
            font-family: 'JetBrains Mono', monospace;
        }

        /* Diagram Styles */
        .box {
            fill: #1e293b;
            stroke: #334155;
            stroke-width: 2;
            rx: 8;
        }

        .box-highlight {
            fill: #1e1b4b;
            stroke: #6366f1;
            stroke-width: 2;
            rx: 8;
        }

        .box-local {
            fill: #14532d;
            stroke: #22c55e;
            stroke-width: 2;
            rx: 8;
            fill-opacity: 0.2;
        }

        .box-cloud {
            fill: #4c1d95;
            stroke: #a855f7;
            stroke-width: 2;
            rx: 8;
            fill-opacity: 0.2;
        }

        .box-db {
            fill: #334155;
            stroke: #94a3b8;
            stroke-width: 2;
            rx: 4;
        }

        .text-label {
            font-size: 14px;
            fill: #cbd5e1;
            font-weight: 600;
            text-anchor: middle;
            pointer-events: none;
        }

        .text-sub {
            font-size: 11px;
            fill: #94a3b8;
            text-anchor: middle;
            pointer-events: none;
        }

        .text-title {
            font-size: 16px;
            fill: #ffffff;
            font-weight: 800;
            text-anchor: middle;
            pointer-events: none;
        }

        .path-flow {
            fill: none;
            stroke: #64748b;
            stroke-width: 2;
            marker-end: url(#arrowhead);
            stroke-dasharray: 5, 5;
            animation: dash 30s linear infinite;
        }

        .path-solid {
            fill: none;
            stroke: #94a3b8;
            stroke-width: 2;
            marker-end: url(#arrowhead);
        }

        .path-loop {
            fill: none;
            stroke: #fbbf24;
            stroke-width: 2;
            marker-end: url(#arrowhead-amber);
            stroke-dasharray: 4;
            animation: dash 20s linear infinite;
        }

        @keyframes dash {
            to {
                stroke-dashoffset: -1000;
            }
        }
    </style>
</head>

<body class="flex flex-col items-center justify-center min-h-screen p-8">

    <div class="mb-6 text-center">
        <h1 class="text-3xl font-bold tracking-tight text-white mb-2">CORTEX ARCHITECTURE</h1>
        <p class="text-slate-400">Hybrid Neurosymbolic Agent System</p>
    </div>

    <!-- MAIN DIAGRAM SVG -->
    <div class="bg-slate-900 border border-slate-800 rounded-2xl shadow-2xl p-4 overflow-hidden w-full max-w-6xl">
        <svg viewBox="0 0 1000 700" class="w-full h-auto">

            <!-- DEFINITIONS -->
            <defs>
                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#94a3b8" />
                </marker>
                <marker id="arrowhead-amber" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#fbbf24" />
                </marker>
                <filter id="glow" x="-20%" y="-20%" width="140%" height="140%">
                    <feGaussianBlur stdDeviation="3" result="blur" />
                    <feComposite in="SourceGraphic" in2="blur" operator="over" />
                </filter>
            </defs>

            <!-- REGIONS -->

            <!-- Region: Client -->
            <rect x="50" y="20" width="900" height="100" class="box" style="stroke:none; fill:none;" />

            <!-- Region: Backend/API -->
            <rect x="50" y="150" width="900" height="250" class="box" style="fill:#0f172a; stroke-dasharray: 5,5;" />
            <text x="80" y="175" class="text-sub" style="text-anchor:start; fill:#64748b;">BACKEND API & AGENT
                LAYER</text>

            <!-- Region: Persistence -->
            <rect x="50" y="440" width="900" height="220" class="box" style="fill:#020617; stroke-dasharray: 5,5;" />
            <text x="80" y="465" class="text-sub" style="text-anchor:start; fill:#64748b;">MEMORY & SUB-CONSCIOUS</text>


            <!-- === 1. USER LAYER === -->

            <!-- User Node -->
            <circle cx="500" cy="70" r="30" fill="#4f46e5" stroke="#818cf8" stroke-width="3" />
            <text x="500" y="75" class="text-label" style="fill:white;">USER</text>

            <!-- Frontend UI -->
            <rect x="350" y="40" width="300" height="60" rx="10" fill="none" stroke="#818cf8" stroke-width="2"
                stroke-dasharray="4" />
            <text x="600" y="55" class="text-sub" style="text-anchor:start;">Morning Briefing UI</text>


            <!-- === 2. THE GATEWAY (SENSE) === -->

            <!-- API Gateway -->
            <rect x="400" y="180" width="200" height="50" class="box-highlight" />
            <text x="500" y="200" class="text-label">FastAPI Gateway</text>
            <text x="500" y="215" class="text-sub">Interruption Logic</text>

            <!-- Router (Local LLM) -->
            <rect x="250" y="260" width="180" height="80" class="box-local" />
            <text x="340" y="290" class="text-title" style="fill:#4ade80;">ROUTER</text>
            <text x="340" y="305" class="text-sub">Local LLM (Llama 3)</text>
            <text x="340" y="320" class="text-sub" style="fill:#22c55e;">Privacy: High | Latency: Low</text>


            <!-- === 3. THE AGENTS (THINK) === -->

            <!-- Scheduler Agent -->
            <rect x="500" y="260" width="140" height="80" class="box-cloud" />
            <text x="570" y="290" class="text-label">Scheduler</text>
            <text x="570" y="310" class="text-sub">GPT-4o (Logic)</text>

            <!-- Social Agent -->
            <rect x="660" y="260" width="140" height="80" class="box-cloud" />
            <text x="730" y="290" class="text-label">Social Analyst</text>
            <text x="730" y="310" class="text-sub">Claude 3.5 (Nuance)</text>

            <!-- Clarification Loop Arrow -->
            <path d="M 570 260 L 570 240 L 450 240 L 450 210" stroke="#fbbf24" stroke-width="2" fill="none"
                marker-end="url(#arrowhead-amber)" />
            <rect x="470" y="225" width="80" height="20" rx="4" fill="#451a03" />
            <text x="510" y="239" class="text-sub" style="fill:#fbbf24;">Clarification</text>


            <!-- === 4. DATA LAYER (MEMORY) === -->

            <!-- Neo4j Graph -->
            <g transform="translate(300, 500)">
                <rect x="0" y="0" width="180" height="100" class="box-db" />
                <text x="90" y="30" class="text-title">Neo4j Graph</text>
                <text x="90" y="50" class="text-sub">Relations & Logic</text>
                <!-- Nodes inside -->
                <circle cx="50" cy="70" r="10" fill="#4f46e5" />
                <circle cx="90" cy="70" r="10" fill="#059669" />
                <circle cx="130" cy="70" r="10" fill="#db2777" />
                <line x1="50" y1="70" x2="90" y2="70" stroke="#64748b" stroke-width="2" />
                <line x1="90" y1="70" x2="130" y2="70" stroke="#64748b" stroke-width="2" />
            </g>

            <!-- Vector DB -->
            <g transform="translate(520, 500)">
                <rect x="0" y="0" width="180" height="100" class="box-db" />
                <text x="90" y="30" class="text-title">Vector Index</text>
                <text x="90" y="50" class="text-sub">Embeddings (Semantic)</text>
                <text x="90" y="70" class="text-sub" style="font-family:monospace;">[0.1, -0.4, 0.9]</text>
            </g>


            <!-- === 5. THE SUBCONSCIOUS LOOP === -->

            <g transform="translate(750, 480)">
                <rect x="0" y="0" width="180" height="140" class="box" style="stroke:#fbbf24; stroke-width:2;" />
                <text x="90" y="25" class="text-label" style="fill:#fbbf24;">BACKGROUND WORKER</text>
                <text x="90" y="40" class="text-sub">Celery / Cron</text>

                <line x1="10" y1="55" x2="170" y2="55" stroke="#334155" />

                <text x="20" y="75" class="text-sub" style="text-anchor:start;">• Risk Detection</text>
                <text x="20" y="95" class="text-sub" style="text-anchor:start;">• Memory Consolidation</text>
                <text x="20" y="115" class="text-sub" style="text-anchor:start;">• Schedule Optimization</text>
            </g>


            <!-- === CONNECTIONS === -->

            <!-- User to Gateway -->
            <path d="M 500 100 L 500 180" class="path-solid" />

            <!-- Gateway to Router -->
            <path d="M 500 230 L 400 260" class="path-solid" />

            <!-- Router to Agents -->
            <path d="M 430 300 L 500 300" class="path-flow" />
            <path d="M 430 300 L 660 300" class="path-flow" />

            <!-- Agents to DBs -->
            <path d="M 570 340 L 400 500" class="path-flow" /> <!-- Scheduler to Graph -->
            <path d="M 730 340 L 450 500" class="path-flow" /> <!-- Social to Graph -->
            <path d="M 730 340 L 600 500" class="path-flow" /> <!-- Social to Vector -->

            <!-- Subconscious to DBs (Read/Write) -->
            <path d="M 750 550 L 700 550" stroke="#fbbf24" stroke-width="2" marker-end="url(#arrowhead-amber)" />

            <!-- Subconscious Alert Loop back to User -->
            <path d="M 840 480 L 840 200 L 600 200" class="path-loop" />
            <text x="850" y="350" class="text-sub" transform="rotate(-90 850,350)" style="fill:#fbbf24;">PROACTIVE
                ALERTS (PUSH)</text>

        </svg>
    </div>

    <!-- Legend -->
    <div class="mt-8 flex gap-8 text-sm text-slate-400">
        <div class="flex items-center gap-2">
            <div class="w-4 h-4 rounded border-2 border-green-500 bg-green-900/30"></div>
            <span>Local (Ollama)</span>
        </div>
        <div class="flex items-center gap-2">
            <div class="w-4 h-4 rounded border-2 border-purple-500 bg-purple-900/30"></div>
            <span>Cloud (GPT-4o)</span>
        </div>
        <div class="flex items-center gap-2">
            <div class="w-4 h-4 rounded border-2 border-amber-500 bg-amber-900/30"></div>
            <span>Subconscious Loop</span>
        </div>
    </div>

</body>

</html>